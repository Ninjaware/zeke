/*
 *-----------------------------------------------------------------------------
 *  FatFs - FAT file system module
 *-----------------------------------------------------------------------------
 * FatFs module is a generic FAT file system module for small embedded systems.
 * This is a free software that opened for education, research and commercial
 * developments under license policy of following terms.
 *
 * Copyright (c) 2020 Olli Vanhoja <olli.vanhoja@alumni.helsinki.fi>
 *  Copyright (c) 2014 - 2017 Olli Vanhoja <olli.vanhoja@cs.helsinki.fi>
 *  Copyright (C) 2014, ChaN, all right reserved.
 *
 * * The FatFs module is a free software and there is NO WARRANTY.
 * * No restriction on use. You can use, modify and redistribute it for
 *   personal, non-profit or commercial products UNDER YOUR RESPONSIBILITY.
 * * Redistributions of source code must retain the above copyright notice.
 *
 *-----------------------------------------------------------------------------
 */

#include <stddef.h>
#include <stdint.h>
#include "ff.h"

/*
 * The following arrays are defined in ucs/ccsbcs.c
 */
extern const WCHAR fatfs_ccsbcs_tbl_437[];
extern const WCHAR fatfs_ccsbcs_tbl_720[];
extern const WCHAR fatfs_ccsbcs_tbl_737[];
extern const WCHAR fatfs_ccsbcs_tbl_775[];
extern const WCHAR fatfs_ccsbcs_tbl_850[];
extern const WCHAR fatfs_ccsbcs_tbl_852[];
extern const WCHAR fatfs_ccsbcs_tbl_855[];
extern const WCHAR fatfs_ccsbcs_tbl_857[];
extern const WCHAR fatfs_ccsbcs_tbl_858[];
extern const WCHAR fatfs_ccsbcs_tbl_862[];
extern const WCHAR fatfs_ccsbcs_tbl_866[];
extern const WCHAR fatfs_ccsbcs_tbl_874[];
extern const WCHAR fatfs_ccsbcs_tbl_1250[];
extern const WCHAR fatfs_ccsbcs_tbl_1251[];
extern const WCHAR fatfs_ccsbcs_tbl_1252[];
extern const WCHAR fatfs_ccsbcs_tbl_1253[];
extern const WCHAR fatfs_ccsbcs_tbl_1254[];
extern const WCHAR fatfs_ccsbcs_tbl_1255[];
extern const WCHAR fatfs_ccsbcs_tbl_1256[];
extern const WCHAR fatfs_ccsbcs_tbl_1257[];
extern const WCHAR fatfs_ccsbcs_tbl_1258[];

struct fatfs_dbcs {
    uint8_t cp_df1s;
    uint8_t cp_df1e;
    uint8_t cp_df2s;
    uint8_t cp_df2e;
    uint8_t cp_ds1s;
    uint8_t cp_ds1e;
    uint8_t cp_ds2s;
    uint8_t cp_ds2e;
    uint8_t cp_ds3s;
    uint8_t cp_ds3e;
};

/*
 * DBCS code ranges and SBCS extend character conversion table
 */

/* 932: Japanese Shift-JIS */
static struct fatfs_dbcs dbcs_cp932 = {
    .cp_df1s = 0x81, /* DBC 1st byte range 1 start */
    .cp_df1e = 0x9F, /* DBC 1st byte range 1 end */
    .cp_df2s = 0xE0, /* DBC 1st byte range 2 start */
    .cp_df2e = 0xFC, /* DBC 1st byte range 2 end */
    .cp_ds1s = 0x40, /* DBC 2nd byte range 1 start */
    .cp_ds1e = 0x7E, /* DBC 2nd byte range 1 end */
    .cp_ds2s = 0x80, /* DBC 2nd byte range 2 start */
    .cp_ds2e = 0xFC, /* DBC 2nd byte range 2 end */
};

/* 936: Simplified Chinese GBK */
static struct fatfs_dbcs dbcs_cp936 = {
    .cp_df1s = 0x81,
    .cp_df1e = 0xFE,
    .cp_ds1s = 0x40,
    .cp_ds1e = 0x7E,
    .cp_ds2s = 0x80,
    .cp_ds2e = 0xFE,
};

/* 949: Korean */
static struct fatfs_dbcs dbcs_cp949 = {
    .cp_df1s = 0x81,
    .cp_df1e = 0xFE,
    .cp_ds1s = 0x41,
    .cp_ds1e = 0x5A,
    .cp_ds2s = 0x61,
    .cp_ds2e = 0x7A,
    .cp_ds3s = 0x81,
    .cp_ds3e = 0xFE,
};

/* 950: Traditional Chinese Big5 */
static struct fatfs_dbcs dbcs_cp950 = {
    .cp_df1s = 0x81,
    .cp_df1e = 0xFE,
    .cp_ds1s = 0x40,
    .cp_ds1e = 0x7E,
    .cp_ds2s = 0xA1,
    .cp_ds2e = 0xFE,
};

/* 437: U.S. (OEM) */
static const uint8_t cp437_ExCvt[] = {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 720: Arabic (OEM) */
static const uint8_t cp720_ExCvt[] = {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x90,0x92,0x92,0x93,0x94,0x95,0x49,0x49,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 737: Greek (OEM) */
static const uint8_t cp737_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,
                0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 775: Baltic (OEM) */
static const uint8_t cp775_ExCvt[] = {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F,
                0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 850: Multilingual Latin 1 (OEM) */
static const uint8_t cp850_ExCvt[] = {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x59,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F,
                0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 852: Latin 2 (OEM) */
static const uint8_t cp852_ExCvt[] = {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0x9B,0x9D,0x9E,0x9F,
                0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBD,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xEB,0xFC,0xFC,0xFE,0xFF};

/* 855: Cyrillic (OEM) */
static const uint8_t cp855_ExCvt[] = {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0x9D,0x9D,0x9F,0x9F,
                0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB9,0xBA,0xBB,0xBC,0xBE,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD9,0xDA,0xDB,0xDC,0xDD,0xE0,0xDF,
                0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFD,0xFE,0xFF};

/* 857: Turkish (OEM) */
static const uint8_t cp857_ExCvt[] = {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9E,
                0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 858: Multilingual Latin 1 + Euro (OEM) */
static const uint8_t cp858_ExCvt[] = {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x59,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F,
                0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 862: Hebrew (OEM) */
static const uint8_t cp862_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 866: Russian (OEM) */
static const uint8_t cp866_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 874: Thai (OEM, Windows) */
static const uint8_t cp874_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 1250: Central Europe (Windows) */
static const uint8_t cp1250_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x8A,0x9B,0x8C,0x8D,0x8E,0x8F,
                0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xA3,0xB4,0xB5,0xB6,0xB7,0xB8,0xA5,0xAA,0xBB,0xBC,0xBD,0xBC,0xAF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xFF};

/* 1251: Cyrillic (Windows) */
static const uint8_t cp1251_ExCvt[] = {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x80,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x8A,0x9B,0x8C,0x8D,0x8E,0x8F,
                0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB2,0xA5,0xB5,0xB6,0xB7,0xA8,0xB9,0xAA,0xBB,0xA3,0xBD,0xBD,0xAF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF};

/* 1252: Latin 1 (Windows) */
static const uint8_t cp1252_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0xAd,0x9B,0x8C,0x9D,0xAE,0x9F,
                0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0x9F};

/* 1253: Greek (Windows) */
static const uint8_t cp1253_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xA2,0xB8,0xB9,0xBA,
                0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xFB,0xBC,0xFD,0xBF,0xFF};

/* 1254: Turkish (Windows) */
static const uint8_t cp1254_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x8A,0x9B,0x8C,0x9D,0x9E,0x9F,
                0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0x9F};

/* 1255: Hebrew (Windows) */
static const uint8_t cp1255_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF};

/* 1256: Arabic (Windows) */
static const uint8_t cp1256_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x8C,0x9D,0x9E,0x9F,
                0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,0xF3,0x4F,0xF5,0xF6,0xF7,0xF8,0x55,0xFA,0x55,0x55,0xFD,0xFE,0xFF};

/* 1257: Baltic (Windows) */
static const uint8_t cp1257_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,
                0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xA8,0xB9,0xAA,0xBB,0xBC,0xBD,0xBE,0xAF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xFF};

/* 1258: Vietnam (OEM, Windows) */
static const uint8_t cp1258_ExCvt[] = {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0xAC,0x9D,0x9E,0x9F,
                0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF,
                0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,0xD3,0xD4,0xD5,0xD6,0xF7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xFE,0x9F};

/* One 1st byte area */
static int dbcs_df1s_isDBCS1(const struct fatfs_cp * restrict cp, int c)
{
    struct fatfs_dbcs * const dbcs = cp->cp_dbcs;
    const uint8_t df1s = dbcs->cp_df1s;
    const uint8_t df1e = dbcs->cp_df1e;

    return ((uint8_t)(c) >= df1s && (uint8_t)(c) <= df1e);
}

/* Two 1st byte areas */
static int dbcs_df2s_isDBCS1(const struct fatfs_cp * restrict cp, int c)
{
    const struct fatfs_dbcs * dbcs = cp->cp_dbcs;
    const uint8_t df1s = dbcs->cp_df1s;
    const uint8_t df1e = dbcs->cp_df1e;
    const uint8_t df2s = dbcs->cp_df2s;
    const uint8_t df2e = dbcs->cp_df2e;

    return (((uint8_t)(c) >= df1s && (uint8_t)(c) <= df1e) ||
            ((uint8_t)(c) >= df2s && (uint8_t)(c) <= df2e));
}

/* Two 2nd byte areas */
static int dbcs_ds2s_isDBCS2(const struct fatfs_cp * restrict cp, int c)
{
    const struct fatfs_dbcs * dbcs = cp->cp_dbcs;
    const uint8_t ds1s = dbcs->cp_ds1s;
    const uint8_t ds1e = dbcs->cp_ds1e;
    const uint8_t ds2s = dbcs->cp_ds2s;
    const uint8_t ds2e = dbcs->cp_ds2e;

    return (((uint8_t)(c) >= ds1s && (uint8_t)(c) <= ds1e) ||
            ((uint8_t)(c) >= ds2s && (uint8_t)(c) <= ds2e));
}

/* Three 2nd byte areas */
static int dbcs_ds3s_isDBCS2(const struct fatfs_cp * restrict cp, int c)
{
    const struct fatfs_dbcs * dbcs = cp->cp_dbcs;
    const uint8_t ds1s = dbcs->cp_ds1s;
    const uint8_t ds1e = dbcs->cp_ds1e;
    const uint8_t ds2s = dbcs->cp_ds2s;
    const uint8_t ds2e = dbcs->cp_ds2e;
    const uint8_t ds3s = dbcs->cp_ds3s;
    const uint8_t ds3e = dbcs->cp_ds3e;

    return (((uint8_t)(c) >= ds1s && (uint8_t)(c) <= ds1e) ||
            ((uint8_t)(c) >= ds2s && (uint8_t)(c) <= ds2e) ||
            ((uint8_t)(c) >= ds3s && (uint8_t)(c) <= ds3e));
}

static int sbcs_isDBCS1(const struct fatfs_cp * restrict cp, int c)
{
    return 0;
}

static int sbcs_isDBCS2(const struct fatfs_cp * restrict cp, int c)
{
    return 0;
}

/* https://docs.microsoft.com/en-us/windows/win32/intl/code-page-identifiers */
static const struct fatfs_cp fatfs_codepages[] = {
    {
        .cp_id = 932,
        .cp_name = "Japanese Shift-JIS",
        .cp_dbcs = &dbcs_cp932,
        .cp_ExCvt = NULL,
        .cp_conv_tbl = NULL,
        .cp_isDBCS1 = dbcs_df2s_isDBCS1,
        .cp_isDBCS2 = dbcs_ds2s_isDBCS2,
        .cp_convert2uni = fatfs_cc932_convert2uni,
        .cp_convert2oem = fatfs_cc932_convert2oem,
        .cp_wtoupper = fatfs_cc932_wtoupper,
    },
    {
        .cp_id = 936,
        .cp_name = "Simplified Chinese GBK",
        .cp_dbcs = &dbcs_cp936,
        .cp_ExCvt = NULL,
        .cp_conv_tbl = NULL,
        .cp_isDBCS1 = dbcs_df1s_isDBCS1,
        .cp_isDBCS2 = dbcs_ds2s_isDBCS2,
        .cp_convert2uni = fatfs_cc936_convert2uni,
        .cp_convert2oem = fatfs_cc936_convert2oem,
        .cp_wtoupper = fatfs_cc936_wtoupper,
    },
    {
        .cp_id = 949,
        .cp_name = "OEM Korean UHC",
        .cp_dbcs = &dbcs_cp949,
        .cp_ExCvt = NULL,
        .cp_conv_tbl = NULL,
        .cp_isDBCS1 = dbcs_df1s_isDBCS1,
        .cp_isDBCS2 = dbcs_ds3s_isDBCS2,
        .cp_convert2uni = fatfs_cc949_convert2uni,
        .cp_convert2oem = fatfs_cc949_convert2oem,
        .cp_wtoupper = fatfs_cc949_wtoupper,
    },
    {
        .cp_id = 950,
        .cp_name = "Traditional Chinese Big5",
        .cp_dbcs = &dbcs_cp950,
        .cp_ExCvt = NULL,
        .cp_conv_tbl = NULL,
        .cp_isDBCS1 = dbcs_df1s_isDBCS1,
        .cp_isDBCS2 = dbcs_ds2s_isDBCS2,
        .cp_convert2uni = fatfs_cc950_convert2uni,
        .cp_convert2oem = fatfs_cc950_convert2oem,
        .cp_wtoupper = fatfs_cc950_wtoupper,
    },
    {
        .cp_id = 437,
        .cp_name = "OEM United States",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp437_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_437,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 720,
        .cp_name = "Arabic (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp720_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_720,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2uni,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 737,
        .cp_name = "Greek (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp737_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_737,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 775,
        .cp_name = "Baltic (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp775_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_775,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 850,
        .cp_name = "Multilingual Latin 1 (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp850_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_850,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 852,
        .cp_name = "Latin 2 (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp852_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_852,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 855,
        .cp_name = "Cyrillic (OEM)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp855_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_855,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 857,
        .cp_name = "Turkish (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp857_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_857,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 858,
        .cp_name = "Multilingual Latin 1 + Euro (OEM)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp858_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_858,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 862,
        .cp_name = "Hebrew (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp862_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_862,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 866,
        .cp_name = "Cyrillic (DOS)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp866_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_866,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 874,
        .cp_name = "Thai (ISO 8859-11, OEM, Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp874_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_874,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1250,
        .cp_name = "Central European (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1250_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1250,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1251,
        .cp_name = "Cyrillic (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1251_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1251,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1252,
        .cp_name = "Latin 1 (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1252_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1252,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1253,
        .cp_name= "Greek (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1253_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1253,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1254,
        .cp_name = "Turkish (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1254_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1254,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1255,
        .cp_name = "Hebrew (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1255_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1255,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1256,
        .cp_name = "Arabic (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1256_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1256,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1257,
        .cp_name = "Baltic (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1257_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1257,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    {
        .cp_id = 1258,
        .cp_name = "Vietnamese (Windows)",
        .cp_dbcs = NULL,
        .cp_ExCvt = cp1258_ExCvt,
        .cp_conv_tbl = fatfs_ccsbcs_tbl_1258,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert2uni = fatfs_ccsbcs_convert2uni,
        .cp_convert2oem = fatfs_ccsbcs_convert2oem,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
    /* TODO 2859x iso-885-x */
    /* US-ASCII is not really supported */
#if 0
    {
        .cp_id = "20127",
        .cp_name = "US-ASCII",
        .cp_dbcs = NULL,
        .cp_ExCvt = NULL,
        .cp_conv_tbl = NULL,
        .cp_isDBCS1 = sbcs_isDBCS1,
        .cp_isDBCS2 = sbcs_isDBCS2,
        .cp_convert = fatfs_ccsbcs_convert,
        .cp_wtoupper = fatfs_ccsbcs_wtoupper,
    },
#endif
};

const struct fatfs_cp * fatfs_cp_get(int cp_id)
{
    for (size_t i = 0; i < num_elem(fatfs_codepages); i++) {
        const struct fatfs_cp *cp = &fatfs_codepages[i];

        if (cp->cp_id == cp_id) {
            return cp;
        }
    }

    return NULL;
}
